(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4d836eaf"],{effc:function(e,t,n){"use strict";n.r(t);n("d81d"),n("4de4"),n("d3b7"),n("b0c0");var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"main"},[t("a-page-header",{staticClass:"head1",attrs:{title:"返回"},on:{back:function(){return e.$router.go(-1)}}}),t("div",[t("p",[t("span",{staticStyle:{"font-size":"4ch","font-family":"华文中宋"}},[e._v("标题:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.title,expression:"form.title"}],domProps:{value:e.form.title},on:{input:function(t){t.target.composing||e.$set(e.form,"title",t.target.value)}}})]),t("p",[t("span",{staticStyle:{"font-size":"4ch","font-family":"华文中宋"}},[e._v("文章类别:")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedOption,expression:"selectedOption"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedOption=t.target.multiple?n:n[0]}}},e._l(e.options,(function(n){return t("option",{key:n.id,domProps:{value:n.id}},[e._v(" "+e._s(n.name)+" ")])})),0)]),t("p",[t("span",{staticStyle:{"font-size":"4ch","font-family":"华文中宋"}},[e._v("标题图片:")]),t("input",{attrs:{type:"file"},on:{change:e.onFileChange}}),e.imageUrl?t("img",{staticStyle:{width:"20ch"},attrs:{src:e.imageUrl,alt:"标题图片"}}):e._e()])]),t("div",{staticStyle:{border:"1px solid #ccc","margin-top":"10px"}},[t("Toolbar",{staticStyle:{"border-bottom":"1px solid #ccc"},attrs:{editor:e.editor,defaultConfig:e.toolbarConfig,mode:e.mode}}),t("Editor",{staticStyle:{height:"400px","overflow-y":"hidden"},attrs:{defaultConfig:e.editorConfig,mode:e.mode},on:{onChange:e.onChange,onCreated:e.onCreated},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1),t("div",{staticStyle:{"margin-top":"10px"}},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.form.content,expression:"form.content"}],staticStyle:{width:"100%",height:"200px",outline:"none"},attrs:{readonly:""},domProps:{value:e.form.content},on:{input:function(t){t.target.composing||e.$set(e.form,"content",t.target.value)}}})]),t("a-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("修改")]),t("a-button",{staticStyle:{"margin-left":"10ch",float:"right"},on:{click:e.goback}},[e._v("取消")])],1)},i=[],o=n("c7eb"),r=n("1da1"),c=(n("af93"),n("a9e3"),n("4e15")),l=(n("c24f"),n("3bc7")),s=n("3f5e"),d=n("55aa"),u=(n("70d8"),{name:"MyEditor",components:{Editor:c["a"],Toolbar:c["b"]},data:function(){return{options:[],selectedOption:null,selectedFile:null,imageUrl:"",posterName:"",form:{title:"",content:""},editor:null,html:"<p>hello&nbsp;world</p>",toolbarConfig:{},editorConfig:{placeholder:"请输入内容...",MENU_CONF:{uploadImage:{server:"http://111.229.199.247:8100/api/fileOss/upload",fieldName:"file",maxFileSize:1048576,maxNumberOfFiles:10,allowedFileTypes:["image/*"],timeout:15e3,onSuccess:function(e,t){}},uploadVideo:{server:"http://111.229.199.247:8100/file/upload",fieldName:"file",maxFileSize:5242880,maxNumberOfFiles:3,allowedFileTypes:["video/*"],timeout:15e3,headers:{Access_token:this.$store.getters.token}}}},mode:"simple"}},methods:{getArtiDetail:function(){var e=this;return Object(r["a"])(Object(o["a"])().mark((function t(){var n,a,i;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.$route.query.artiId,a=n,t.next=4,Object(l["c"])({id:a});case 4:i=t.sent,i&&(e.form.content=i.data.content,e.form.createdTime=i.data.publishedAt,e.form.title=i.data.title,e.imageUrl=i.data.picture,e.selectedOption=i.data.categoryId,i.data.authorId);case 6:case"end":return t.stop()}}),t)})))()},getArtiKindOptions:function(){var e=this;return Object(r["a"])(Object(o["a"])().mark((function t(){var n,a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(d["d"])({current:1,pageSize:10});case 2:n=t.sent,a=n.data.records,a&&(e.options=a);case 5:case"end":return t.stop()}}),t)})))()},onFileChange:function(e){var t=e.target.files||e.dataTransfer.files;t.length&&(this.selectedFile=t[0],this.uploadImage())},uploadImage:function(){var e=this;return Object(r["a"])(Object(o["a"])().mark((function t(){var n,a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.selectedFile){t.next=2;break}return t.abrupt("return");case 2:return n=new FormData,n.append("file",e.selectedFile),t.prev=4,t.next=7,Object(s["a"])(n);case 7:a=t.sent,a&&(e.imageUrl=a.data),t.next=13;break;case 11:t.prev=11,t.t0=t["catch"](4);case 13:case"end":return t.stop()}}),t,null,[[4,11]])})))()},onCreated:function(e){this.editor=Object.seal(e)},onChange:function(e){},insertTextHandler:function(){var e=this.editor;null!=e&&e.insertText(" hello ")},printEditorHtml:function(){this.editor},disableHandler:function(){var e=this.editor;null!=e&&e.disable()},onSubmit:function(){var e=this;return Object(r["a"])(Object(o["a"])().mark((function t(){var n,a,i,r,c;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.form.title,a=e.form.content,i=e.imageUrl,r=e.selectedOption,c=Number(e.$route.query.artiId),t.next=7,Object(l["f"])({categoryId:r,content:a,picture:i,title:n,id:c});case 7:t.sent,e.$router.go(-1);case 9:case"end":return t.stop()}}),t)})))()},goback:function(){this.$router.go(-1)}},mounted:function(){var e=this;this.getArtiDetail();this.editor;this.getArtiKindOptions(),setTimeout((function(){e.html="<p>Ajax 异步设置内容 HTML</p>"}),1500)},beforeDestroy:function(){var e=this.editor;null!=e&&e.destroy()}}),f=u,p=(n("feb6"),n("2877")),m=Object(p["a"])(f,a,i,!1,null,null,null);t["default"]=m.exports},f48a:function(e,t,n){},feb6:function(e,t,n){"use strict";n("f48a")}}]);